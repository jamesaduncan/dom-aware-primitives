<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test Selector Generation</title>
    <script type="module" src="./index.mjs"></script>
</head>
<body>
    <div id="container">
        <h1 id="main-title">Test Page</h1>
        <article>
            <h2>No ID here</h2>
            <p id="first-para">Paragraph with ID</p>
            <p>Paragraph without ID</p>
        </article>
        <div>
            <span>Deeply nested without IDs</span>
        </div>
    </div>
    
    <script type="module">
        document.addEventListener('DASAvailable', () => {
            console.log('DAS Available - Testing selectors:');
        });
        
        document.addEventListener('DASUnavailable', () => {
            console.log('DAS Unavailable - Testing selectors:');
        });
        
        // Wait a bit for the module to load
        setTimeout(() => {
            // Test elements with IDs
            const title = document.querySelector('#main-title');
            console.log('Title selector:', title.selector); // Should be: #main-title
            
            const para = document.querySelector('#first-para');
            console.log('Paragraph selector:', para.selector); // Should be: #first-para
            
            // Test elements without IDs but with ID'd parents
            const h2 = document.querySelector('h2');
            console.log('H2 selector:', h2.selector); // Should be: #container > article:nth-child(2) > h2:nth-child(1)
            
            const secondPara = document.querySelectorAll('p')[1];
            console.log('Second paragraph selector:', secondPara.selector); // Should use #container as base
            
            // Test deeply nested element
            const span = document.querySelector('span');
            console.log('Span selector:', span.selector); // Should use #container as base
        }, 100);
    </script>
</body>
</html>